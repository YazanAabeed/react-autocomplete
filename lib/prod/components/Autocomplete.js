"use strict";var _react=_interopRequireDefault(require("react"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Autocomplete=/*#__PURE__*/function(a){function b(){var a,c;_classCallCheck(this,b);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=_possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(e))),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"items",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"state",{selectedItem:null,inputValue:"",isOpen:c.props.isOpen||!1,highlightedIndex:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"isControlledProps",function(a){return"undefined"!=typeof c.props[a]}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"handleCloseDropdown",function(){c.isControlledProps("isOpen")?c.changeState({inputValue:""}):c.changeState({isOpen:!1,inputValue:"",highlightedIndex:null})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"handleClickOutside",function(){c.handleCloseDropdown(),c.props.onOutsideClicked()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"handleBodyClicked",function(a){if(c.parentNode){if(c.parentNode.contains(a.target))return a;c.handleClickOutside()}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"changeState",function(a,b){var d;c.setState(function(b){return d=b,Object.assign({},b,a)},function(){b&&b(d,c.state)})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"onItemSelected",function(a){c.changeState({selectedItem:a},function(){c.props.onChange(a),c.handleCloseDropdown()})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"getItemProps",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!a.item)throw new Error("item attribute is required for getItemProps");if("undefined"==typeof a.index)throw new Error("index attribute is required for getItemProps");void 0===a.index?(c.items.push(a.item),a.index=c.items.indexOf(a.item)):c.items[a.index]=a.item;var b=Object.assign({},a);return delete b.item,delete b.className,_objectSpread({onClick:function b(){c.onItemSelected(a.item)},key:a.key||a.index,className:[a.className,a.index===c.state.highlightedIndex?"drop-down-active-li":null].join(" ")},b)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"handleInputKeyUp",function(a){var b=null===c.state.highlightedIndex?-1:c.state.highlightedIndex;var d=!1,e=!1,f=!0;switch(a.keyCode){case 40:b+=1;break;case 38:b-=1;break;case 13:e=!0;break;case 27:c.handleCloseDropdown(),f=!1;break;default:d=!0;}if(!d&&f){b=0<=b?b:0;var g=Object.assign({},c.items[b]);Object.keys(g).length&&(e&&c.onItemSelected(g),c.changeState({highlightedIndex:b},function(){var a=c.listElement.querySelector(".drop-down-active-li"),b=c.listElement;if(a){var d=a.offsetTop+a.offsetHeight;d>=b.offsetHeight?c.listElement.scrollTop+=a.offsetHeight:c.listElement.scrollTop-=a.offsetHeight}}))}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"getInputProps",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread({onChange:function d(a){var b={inputValue:a.target.value};c.state.isOpen||c.isControlledProps("isOpen")||(b.isOpen=!0),c.changeState(b)},onKeyDown:function b(a){c.handleInputKeyUp(a)},value:c.state.inputValue,autoComplete:"off"},a)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"getMenuProps",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread({ref:function b(a){return c.listElement=a}},a)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(c)),"getContainerProps",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _objectSpread({ref:function b(a){a?(c.parentNode=a,c.parentNode.querySelector("input").focus()):delete c.parentNode}},a)}),c}return _inherits(b,a),_createClass(b,[{key:"componentDidMount",value:function a(){document.addEventListener("mousedown",this.handleBodyClicked)}},{key:"componentWillUnmount",value:function a(){document.removeEventListener("mousedown",this.handleBodyClicked)}},{key:"render",value:function a(){return this.items=[],this.props.children({getContainerProps:this.getContainerProps,getItemProps:this.getItemProps,selectedItem:this.state.selectedItem,getInputProps:this.getInputProps,getMenuProps:this.getMenuProps,inputValue:this.state.inputValue,isOpen:this.isControlledProps("isOpen")?this.props.isOpen:this.state.isOpen,highlightedIndex:this.state.highlightedIndex})}}]),b}(_react.default.Component);exports.default=Autocomplete,_defineProperty(Autocomplete,"defaultProps",{onChange:function b(a){return a},onOutsideClicked:function a(){}});